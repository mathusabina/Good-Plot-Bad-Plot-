"0",""
"0","# Calculate average casualties per period"
"0","agg_data <- deaths_all %>%"
"0","  group_by(period) %>%"
"0","  summarise(avg_casualties = mean(casualties), .groups = ""drop"")"
"0",""
"0","# Create the combined plot with overlapping layers:"
"0","combined_plot <- ggplot() +"
"0","  # Layer 1: Aggregated Bar Chart"
"0","  geom_bar(data = agg_data, "
"0","           aes(x = period, y = avg_casualties, fill = period),"
"0","           stat = ""identity"", color = ""black"", alpha = 0.6) +"
"0","  # Layer 2: Boxplot for individual casualties"
"0","  geom_boxplot(data = deaths_all,"
"0","               aes(x = period, y = casualties, fill = period),"
"0","               width = 0.3, alpha = 0.4) +"
"0","  # Layer 3: Scatter Plot with jitter for individual data points"
"0","  geom_point(data = deaths_all, "
"0","             aes(x = period, y = casualties, color = period),"
"0","             position = position_jitter(width = 0.4), size = 2, alpha = 0.7)+"
"0","  # Labels and title"
"0","  labs(title = ""Road Casualties Post- and Pre-1983"","
"0","       x = ""Period"","
"0","       y = ""Casualties"") +"
"0","  # Color scales"
"0","  scale_fill_manual(values = c(""Pre-1983"" = ""#e69f00"", ""Post-1983"" = ""#56B4E9"")) +"
"0","  scale_color_manual(values = c(""Pre-1983"" = ""#e69f00"", ""Post-1983"" = ""#56B4E9"")) +"
"0","  coord_cartesian(ylim = c(500, 4500)) +  "
"0","  theme_minimal() +"
"0","  theme(legend.position = ""none"")  "
"0",""
"0","# Display the combined plot"
"0","combined_plot"
"0",""
